#!/usr/bin/env bash

# Benchmark info
echo "TIMING - Starting main script at: $(date)"

# Set working directory to home directory
cd "${HOME}"

# Set variables from user form inputs
jupyter_module="<%= context.module.blank? ? context.custom_module : context.module %>" # Jupyter module
ui="<%= context.jupyter_ui %>" # lab or notebook
extra_args="<%= context.extra_jupyter_args %>" # any extra args provided

# Load Jupyter module
module purge
module load $jupyter_module

# Launch the Jupyter Notebook Server
set -x
jupyter $ui --config="${CONFIG_FILE}" $extra_args
